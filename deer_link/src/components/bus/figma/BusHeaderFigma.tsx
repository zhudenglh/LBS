/**
 * BusHeader - Figmaå®Œæ•´è¿˜åŸ (NativeWind)
 * å‚è€ƒ: /Users/lihua/claude/figma/Bus5
 */

import React, { useState } from 'react';
import { View, Text, Image, TouchableOpacity, Dimensions } from 'react-native';
import Svg, { Path, G } from 'react-native-svg';
import LinearGradient from 'react-native-linear-gradient';
import { BUS_IMAGES } from '../../../constants/busAssets';

// WiFiå›¾æ ‡ç»„ä»¶
function WiFiIcon({ size = 15 }: { size?: number }) {
  return (
    <Svg width={size} height={size * 0.77} viewBox="0 0 30 23" fill="none">
      <G id="WiFi">
        <Path
          d="M28.0046 8.505C27.6191 8.505 27.2351 8.358 26.9426 8.064C23.6921 4.7985 19.3646 3 14.7596 3C10.1456 3 5.81363 4.7985 2.56313 8.064C1.97813 8.6505 1.03013 8.652 0.442128 8.067C-0.145872 7.4835 -0.147372 6.534 0.437628 5.946C4.25513 2.112 9.34163 0 14.7596 0C20.1686 0 25.2506 2.112 29.0666 5.946C29.6516 6.534 29.6501 7.4835 29.0636 8.067C28.7696 8.3595 28.3871 8.505 28.0046 8.505"
          fill="#1D1D1D"
        />
        <Path
          d="M9.99012 16.9804C9.60612 16.9804 9.22212 16.8334 8.92962 16.5409C8.34312 15.9544 8.34312 15.0064 8.92962 14.4199C10.4896 12.8585 12.5596 12.0005 14.7601 12.0005C16.9411 12.0005 19.0096 12.857 20.5831 14.4139C21.1741 14.9959 21.1786 15.9454 20.5966 16.5349C20.0146 17.1244 19.0651 17.1289 18.4756 16.5469C16.4476 14.5429 13.0306 14.5624 11.0506 16.5409C10.7581 16.8334 10.3741 16.9804 9.99012 16.9804"
          fill="#1D1D1D"
        />
        <Path
          d="M23.7599 12.75C23.3744 12.75 22.9889 12.6015 22.6964 12.3075C20.5769 10.1745 17.7599 9 14.7599 9C11.7569 9 8.93086 10.17 6.80536 12.2955C6.22036 12.882 5.27086 12.882 4.68436 12.2955C4.09936 11.7105 4.09936 10.761 4.68436 10.1745C7.37686 7.482 10.9544 6 14.7599 6C18.5639 6 22.1384 7.4895 24.8234 10.1925C25.4084 10.7805 25.4054 11.73 24.8174 12.3135C24.5249 12.6045 24.1424 12.75 23.7599 12.75"
          fill="#1D1D1D"
        />
        <Path
          d="M17.0029 20.253C17.0029 21.4965 15.9949 22.503 14.7529 22.503C13.5094 22.503 12.5029 21.4965 12.5029 20.253C12.5029 19.011 13.5094 18.003 14.7529 18.003C15.9949 18.003 17.0029 19.011 17.0029 20.253"
          fill="#1D1D1D"
        />
      </G>
    </Svg>
  );
}

// å…¬äº¤è½¦å›¾æ ‡ï¼ˆç»¿è‰²åœ†å½¢èƒŒæ™¯ï¼‰
function BusIconGreen({ size = 20 }: { size?: number }) {
  return (
    <Svg width={size} height={size} viewBox="0 0 35 35" fill="none">
      <Path
        d="M32.9 8.4H32.2023V4.89661C32.1677 4.27377 31.9775 3.66953 31.6491 3.13917C31.3207 2.6088 30.8646 2.16923 30.3224 1.86065C30.3224 1.86065 26.6023 0 17.5045 0C8.4079 0 4.6821 1.86065 4.6821 1.86065C4.13996 2.16923 3.68384 2.6088 3.35544 3.13917C3.02705 3.66953 2.83685 4.27377 2.80226 4.89661V8.4H2.10226C1.54605 8.40119 1.01287 8.62228 0.61904 9.01506C0.225209 9.40783 0.00268143 9.94041 0 10.4966V12.5977C0.001192 13.1547 0.222907 13.6886 0.616655 14.0825C1.0104 14.4765 1.54414 14.6985 2.10113 14.7H2.8V29.05C2.80452 29.9386 3.36452 30.73 4.20226 31.0292V32.2C4.20226 32.5677 4.27468 32.9318 4.4154 33.2715C4.55611 33.6112 4.76236 33.9199 5.02236 34.1799C5.28236 34.4399 5.59103 34.6462 5.93075 34.7869C6.27046 34.9276 6.63456 35 7.00226 35C7.36996 35 7.73406 34.9276 8.07377 34.7869C8.41348 34.6462 8.72215 34.4399 8.98216 34.1799C9.24216 33.9199 9.44841 33.6112 9.58912 33.2715C9.72983 32.9318 9.80226 32.5677 9.80226 32.2V31.1523H25.1977V32.2C25.1977 32.9426 25.4927 33.6548 26.0178 34.1799C26.5429 34.705 27.2551 35 27.9977 35C28.7404 35 29.4525 34.705 29.9776 34.1799C30.5027 33.6548 30.7977 32.9426 30.7977 32.2V31.0292C31.2064 30.8832 31.5602 30.6149 31.8111 30.2608C32.0619 29.9067 32.1977 29.484 32.2 29.05V14.7H32.8989C33.4559 14.6985 33.9896 14.4765 34.3833 14.0825C34.7771 13.6886 34.9988 13.1547 35 12.5977V10.4966C34.9956 9.94115 34.7726 9.40976 34.3794 9.0174C33.9862 8.62504 33.4555 8.40325 32.9 8.4ZM10.5 3.5C10.5009 3.31462 10.5749 3.13709 10.706 3.00601C10.8371 2.87493 11.0146 2.80089 11.2 2.8H23.8C24.1861 2.80339 24.4966 3.115 24.5 3.5V4.89661C24.5003 5.08267 24.4268 5.26124 24.2955 5.39312C24.1643 5.525 23.9861 5.5994 23.8 5.6H11.2C11.0143 5.59881 10.8367 5.52414 10.7059 5.39232C10.5752 5.26051 10.502 5.08228 10.5023 4.89661L10.5 3.5ZM7.35226 28.35C7.11849 28.3561 6.88586 28.3153 6.66809 28.2301C6.45032 28.1449 6.25181 28.0169 6.08426 27.8538C5.91672 27.6906 5.78352 27.4956 5.69252 27.2802C5.60152 27.0648 5.55456 26.8333 5.55441 26.5995C5.55426 26.3656 5.60092 26.1341 5.69164 25.9186C5.78236 25.703 5.91531 25.5078 6.08265 25.3445C6.24999 25.1811 6.44833 25.0529 6.66599 24.9674C6.88365 24.8819 7.11622 24.8408 7.35 24.8466C7.80689 24.8579 8.24128 25.0473 8.56053 25.3743C8.87979 25.7014 9.05863 26.1402 9.05893 26.5972C9.05922 27.0542 8.88094 27.4933 8.56211 27.8207C8.24328 28.1482 7.80913 28.3381 7.35226 28.35ZM27.6477 28.35C27.414 28.3559 27.1814 28.315 26.9637 28.2297C26.7459 28.1443 26.5475 28.0162 26.3801 27.853C26.2126 27.6897 26.0795 27.4946 25.9887 27.2791C25.8978 27.0636 25.851 26.8322 25.851 26.5983C25.851 26.3645 25.8978 26.133 25.9887 25.9175C26.0795 25.702 26.2126 25.5069 26.3801 25.3436C26.5475 25.1804 26.7459 25.0523 26.9637 24.967C27.1814 24.8816 27.414 24.8407 27.6477 24.8466C28.1046 24.8582 28.5389 25.0479 28.8579 25.3751C29.177 25.7023 29.3555 26.1413 29.3555 26.5983C29.3555 27.0553 29.177 27.4943 28.8579 27.8215C28.5389 28.1488 28.1046 28.3384 27.6477 28.35ZM29.4 20.3C29.3988 20.485 29.3248 20.6621 29.194 20.7929C29.0632 20.9237 28.8861 20.9977 28.7011 20.9989H6.30113C6.11536 20.9989 5.93713 20.9254 5.80535 20.7945C5.67357 20.6635 5.59894 20.4858 5.59774 20.3V9.1C5.59864 8.91404 5.67314 8.736 5.80495 8.60482C5.93677 8.47364 6.11517 8.4 6.30113 8.4H28.7011C29.0861 8.40339 29.3977 8.715 29.4 9.1V20.3Z"
        fill="#00B42A"
      />
    </Svg>
  );
}

export default function BusHeaderFigma() {
  const [isWiFiConnected, setIsWiFiConnected] = useState(false);
  const screenWidth = Dimensions.get('window').width;

  const handleWiFiPress = () => {
    setIsWiFiConnected(!isWiFiConnected);
  };

  return (
    <View className="bg-card-gray-bg">
      {/* å…¬äº¤è½¦èƒŒæ™¯å›¾å®¹å™¨ */}
      <View style={{ height: 70, overflow: 'hidden' }}>
        <Image
          source={BUS_IMAGES.busBackground}
          style={{ width: screenWidth, height: 70 }}
          resizeMode="cover"
        />
        {/* é¡¶éƒ¨æ¸å˜é®ç½© */}
        <View className="absolute top-0 left-0 right-0" style={{ height: 30 }}>
          <LinearGradient
            colors={['rgba(0,0,0,0.3)', 'transparent']}
            style={{ flex: 1 }}
          />
        </View>
      </View>

      {/* åº•éƒ¨ä¿¡æ¯æ  - ç™½è‰²åœ†è§’èƒŒæ™¯ */}
      <View className="bg-white rounded-t-lg p-lg" style={{ marginTop: -10 }}>
        <View className="flex-row items-center justify-between">
          {/* å·¦ä¾§ï¼š25è·¯ + WiFiæ ‡ç­¾ */}
          <View className="flex-1">
            <View className="flex-row items-center mb-xs">
              <Text className="text-2xl mr-sm">ğŸšŒ</Text>
              <Text className="text-2xl font-semibold text-text-primary">25è·¯</Text>
            </View>
            <Text className="text-sm text-text-disabled ml-6">å—äº¬å…¬äº¤å…è´¹WiFi</Text>
          </View>

          {/* å³ä¾§ï¼šWiFiæŒ‰é’® */}
          <TouchableOpacity onPress={handleWiFiPress} activeOpacity={0.8}>
            <LinearGradient
              colors={['#ffdd19', '#ffe631']}
              start={{ x: 0, y: 0 }}
              end={{ x: 1, y: 0 }}
              className="flex-row items-center p-lg rounded-round"
              style={{
                shadowColor: '#ffdd19',
                shadowOffset: { width: 0, height: 2 },
                shadowOpacity: 0.2,
                shadowRadius: 6,
                elevation: 3,
              }}
            >
              <WiFiIcon size={15} />
              <Text className="text-lg font-semibold text-[#1d1d1d] ml-sm">è¿å…¬äº¤WiFi</Text>
            </LinearGradient>
          </TouchableOpacity>
        </View>
      </View>
    </View>
  );
}
